<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predicting Coastal Hypoxia Across 12 Stations and 3 Data Systems</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Source+Serif+4:ital,wght@0,400;0,600;1,400&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #ffffff;
            --bg-alt: #f8f9fb;
            --bg-card: #ffffff;
            --border: #e5e7eb;
            --border-light: #f0f1f3;
            --text: #1a1a2e;
            --text-secondary: #4a5568;
            --text-muted: #718096;
            --accent: #0c6e8c;
            --accent-light: #e8f4f8;
            --accent-dark: #064e63;
            --teal: #0d9488;
            --teal-light: #ccfbf1;
            --orange: #c2410c;
            --orange-light: #fff7ed;
            --purple: #6d28d9;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow: 0 1px 3px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.04);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.06), 0 2px 4px rgba(0,0,0,0.04);
            --radius: 10px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Source Serif 4', Georgia, serif;
            line-height: 1.85;
            font-size: 17px;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 720px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Hero */
        .hero {
            padding: 80px 24px 60px;
            max-width: 720px;
            margin: 0 auto;
        }

        .hero-eyebrow {
            font-family: 'Inter', sans-serif;
            font-size: 0.8em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--accent);
            margin-bottom: 16px;
        }

        h1 {
            font-family: 'Inter', sans-serif;
            font-size: 2.4em;
            font-weight: 700;
            line-height: 1.15;
            color: var(--text);
            margin-bottom: 20px;
            letter-spacing: -0.025em;
        }

        .hero-sub {
            font-size: 1.15em;
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 28px;
        }

        .hero-links {
            display: flex;
            gap: 16px;
            align-items: center;
            flex-wrap: wrap;
        }

        .hero-links a {
            font-family: 'Inter', sans-serif;
            font-size: 0.85em;
            font-weight: 500;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.15s ease;
        }

        .btn-primary {
            background: var(--accent);
            color: #fff;
            padding: 10px 20px;
            border-radius: 8px;
        }

        .btn-primary:hover { background: var(--accent-dark); }

        .btn-outline {
            color: var(--text-secondary);
            padding: 10px 20px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .btn-outline:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        /* Section headings */
        h2 {
            font-family: 'Inter', sans-serif;
            font-size: 1.5em;
            font-weight: 600;
            color: var(--text);
            margin-top: 56px;
            margin-bottom: 20px;
            letter-spacing: -0.01em;
        }

        p { margin-bottom: 20px; }

        a {
            color: var(--accent);
            text-decoration: underline;
            text-decoration-color: rgba(12, 110, 140, 0.3);
            text-underline-offset: 2px;
            transition: text-decoration-color 0.15s;
        }

        a:hover { text-decoration-color: var(--accent); }

        em { color: var(--text); }

        pre {
            background: var(--bg-alt);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 20px;
            overflow-x: auto;
            margin: 28px 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.82em;
            line-height: 1.7;
            color: var(--text-secondary);
        }

        code {
            font-family: 'JetBrains Mono', monospace;
            color: var(--accent-dark);
        }

        /* Stats */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin: 48px 0;
        }

        @media (max-width: 600px) {
            .stats-row { grid-template-columns: repeat(2, 1fr); }
        }

        .stat-card {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 24px 16px;
            text-align: center;
            box-shadow: var(--shadow-sm);
        }

        .stat-value {
            font-family: 'Inter', sans-serif;
            font-size: 1.8em;
            font-weight: 700;
            color: var(--text);
            line-height: 1.1;
            margin-bottom: 6px;
        }

        .stat-label {
            font-family: 'Inter', sans-serif;
            font-size: 0.78em;
            font-weight: 500;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Map */
        .map-section {
            background: var(--bg-alt);
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
            padding: 48px 24px;
            margin-top: 48px;
            margin-bottom: 48px;
        }

        .map-wrap {
            max-width: 900px;
            margin: 0 auto;
        }

        #map {
            height: 480px;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            box-shadow: var(--shadow-md);
        }

        .map-legend {
            display: flex;
            gap: 24px;
            flex-wrap: wrap;
            margin-top: 16px;
            font-family: 'Inter', sans-serif;
            font-size: 0.8em;
            color: var(--text-muted);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .legend-dot.primary { background: var(--teal); box-shadow: 0 0 0 3px rgba(13,148,136,0.2); }
        .legend-dot.secondary { background: var(--accent); }

        /* Results card */
        .results-card {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 32px;
            margin: 40px 0;
            box-shadow: var(--shadow);
        }

        .results-card h3 {
            font-family: 'Inter', sans-serif;
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--text);
        }

        .results-card .subtitle {
            font-family: 'Inter', sans-serif;
            font-size: 0.85em;
            color: var(--text-muted);
            margin-bottom: 24px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
        }

        @media (max-width: 700px) {
            .results-grid { grid-template-columns: repeat(2, 1fr); }
        }

        .metric-group {
            padding-left: 16px;
            border-left: 3px solid var(--border-light);
        }

        .metric-lead {
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 0.9em;
            color: var(--text);
            margin-bottom: 12px;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 6px;
            font-family: 'Inter', sans-serif;
            font-size: 0.82em;
        }

        .metric-label { color: var(--text-muted); }

        .metric-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
        }

        .metric-value.teal { color: var(--teal); font-weight: 600; }
        .metric-value.blue { color: var(--accent); }
        .metric-value.muted { color: var(--text-muted); }
        .metric-value.orange { color: var(--orange); }

        /* Features */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 28px 0;
        }

        @media (max-width: 600px) {
            .features-grid { grid-template-columns: 1fr; }
        }

        .feature-set {
            background: var(--bg-alt);
            border-radius: var(--radius);
            padding: 20px;
            border-left: 4px solid var(--border);
        }

        .feature-set.cross { border-left-color: var(--teal); }
        .feature-set.ndbc { border-left-color: var(--accent); }
        .feature-set.local { border-left-color: var(--text-muted); }
        .feature-set.no-do { border-left-color: var(--orange); }

        .feature-title {
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .feature-title.cross { color: var(--teal); }
        .feature-title.ndbc { color: var(--accent); }
        .feature-title.local { color: var(--text-secondary); }
        .feature-title.no-do { color: var(--orange); }

        .feature-list {
            list-style: none;
            font-family: 'Inter', sans-serif;
            font-size: 0.82em;
            color: var(--text-secondary);
        }

        .feature-list li {
            margin-bottom: 5px;
            padding-left: 14px;
            position: relative;
        }

        .feature-list li::before {
            content: "";
            position: absolute;
            left: 0;
            top: 9px;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background: var(--border);
        }

        /* Table */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 28px 0;
            font-family: 'Inter', sans-serif;
            font-size: 0.85em;
        }

        thead {
            border-bottom: 2px solid var(--border);
        }

        th {
            padding: 10px 12px;
            text-align: left;
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }

        td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--border-light);
            color: var(--text-secondary);
        }

        tbody tr:hover { background: var(--bg-alt); }

        .primary-station {
            color: var(--teal);
            font-weight: 600;
        }

        /* Takeaways */
        ol {
            margin: 24px 0 40px 0;
            padding-left: 24px;
        }

        ol li {
            margin-bottom: 14px;
            padding-left: 4px;
        }

        ol li::marker {
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            color: var(--accent);
        }

        /* Footer */
        footer {
            margin-top: 80px;
            padding: 40px 0;
            border-top: 1px solid var(--border);
            font-family: 'Inter', sans-serif;
            font-size: 0.82em;
            color: var(--text-muted);
            line-height: 1.7;
        }

        footer strong { color: var(--text-secondary); }

        /* Leaflet overrides */
        .leaflet-popup-content-wrapper {
            border-radius: 8px;
            box-shadow: var(--shadow-md);
            font-family: 'Inter', sans-serif;
        }

        .leaflet-popup-content {
            font-size: 13px;
            line-height: 1.5;
            color: var(--text);
            margin: 12px 14px;
        }

        .leaflet-control-zoom { display: none; }
    </style>
</head>
<body>
    <div class="hero">
        <div class="hero-eyebrow">AQUAVIEW Case Study</div>
        <h1>Predicting Coastal Hypoxia Across 12 Stations and 3 Data Systems</h1>
        <p class="hero-sub">What does it actually look like to build a multi-source ocean analysis from scratch, using a unified data catalog?</p>
        <div class="hero-links">
            <a href="https://aquaview.org" class="btn-primary">AQUAVIEW Catalog</a>
            <a href="https://github.com/AQUAVIEW-DAH/aquaview-hypoxia-demo" class="btn-outline">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
                View Code &amp; Data
            </a>
            <a href="dashboard.html" class="btn-outline">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
                Live Dashboard
            </a>
        </div>
    </div>

    <div class="container">
        <p>Hypoxia, dissolved oxygen dropping below 2 mg/L, kills coastal ecosystems fast. Fish flee, shellfish die, and the damage can cascade for months. Monitoring networks catch it after it starts. The question we wanted to answer: can we predict when a new hypoxia event will <em>begin</em>, days before it happens, using data from a network of stations, satellite products, and offshore profiles?</p>

        <p>This post walks through building that system for the northern Gulf of Mexico. Along the way, we used <a href="https://aquaview.org">AQUAVIEW</a> as the data discovery and access layer, and we'll be honest about what that did and didn't change.</p>

        <h2>The Hard Problem: Onset, Not State</h2>

        <p>The Gulf of Mexico hypoxia prediction field has moved fast. <a href="https://arxiv.org/abs/2602.05178">Rajasekaran et al. (2025)</a> benchmark four deep learning architectures on daily hypoxia classification, with their Spatio-Temporal Transformer reaching AUC-ROC above 0.98. <a href="https://www.nature.com/articles/s41598-025-17053-7">Xue et al. (2025)</a> blend ROMS hindcast output with AI for 72-hour forecasts. XGBoost and Random Forest models show up in study after study, from <a href="https://www.sciencedirect.com/science/article/pii/S2352485525003548">Gulf-wide spatial mapping</a> to lagoon-scale predictions in the Mediterranean.</p>

        <p>Nearly all of this work predicts hypoxia <em>state</em>: is dissolved oxygen below the threshold right now, or will it be tomorrow? Most models also train on output from coupled hydrodynamic-biogeochemical models rather than raw observations. Both choices make sense for their purposes, but they leave a gap.</p>

        <p>We targeted something different: onset prediction. Not "will DO be low?" but "when will a new hypoxic event begin?" Predicting the transition from normal oxygen to hypoxic conditions, days in advance, from observational data alone. That's the question coastal managers actually need answered, and it's harder than state classification because DO autocorrelation can't carry you.</p>

        <h2>Finding the Data</h2>

        <p>The first step in any ocean analysis is figuring out what data exists, where it lives, and how to get it. This is usually the most tedious part. You're browsing NOAA pages, clicking through THREDDS directories, guessing at URL patterns, and hoping variable names are consistent across stations.</p>

        <p>We used AQUAVIEW's STAC API to shortcut this. Three sets of API calls did the core discovery work:</p>

        <pre><code>GET /search?collections=NDBC&bbox=-91,28,-85,31        → 72 NDBC stations
GET /search?collections=WOD&q=Oxygen&bbox=-91,28,-85,31 → 1,770 WOD cruise datasets
GET /search?collections=COASTWATCH&q=sea surface temperature → 25 satellite SST products
GET /search?collections=COASTWATCH&q=chlor               → 8 chlorophyll products</code></pre>

        <p>Three different data systems. Three different hosting infrastructures. Same API.</p>

        <p>From the NDBC results, we filtered for stations where aquaview:variables includes dissolved_oxygen, which narrowed 72 stations down to 14 with DO sensors listed. Then for each of those 14, a GET /collections/NDBC/items/{id} call returned the full item metadata including OPeNDAP asset URLs we'd use to download data. No URL construction, no guessing. The download links came straight from the catalog.</p>

        <p>Two of those 14 turned out to have garbage data: every dissolved oxygen reading was the fill value 99.0. Quality filtering dropped them, leaving 12 stations with valid dissolved oxygen records.</p>

        <p>The CoastWatch discovery was the most interesting addition. AQUAVIEW returned satellite product items with ERDDAP endpoints in their assets field. One product, the Multiparameter Eddy Significance Index, bundles daily satellite SST, sea surface salinity, chlorophyll-a, sea surface height, and eddy kinetic energy into a single gridded dataset at 0.25° resolution. Because ERDDAP supports server-side spatial subsetting, we could request just the grid cells covering our study area. That's 1,438 days of daily satellite coverage from a dataset we wouldn't have found through NDBC alone.</p>

        <p>That's three data access patterns: NDBC stations via OPeNDAP (THREDDS), WOD profiles via S3, and CoastWatch satellite grids via ERDDAP. Each has its own URL structure, its own subsetting conventions, and its own metadata schema. AQUAVIEW abstracts all of that behind assets.csv.href and assets.dods.href.</p>

        <h2>The Station Network</h2>

        <p>AQUAVIEW discovered 12 usable NDBC stations with dissolved oxygen sensors across the northern Gulf.</p>

        <div class="stats-row">
            <div class="stat-card">
                <div class="stat-value">30,500</div>
                <div class="stat-label">Station-Days</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">237</div>
                <div class="stat-label">Hypoxia Onsets</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">1,438</div>
                <div class="stat-label">Satellite Days</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">319</div>
                <div class="stat-label">Features</div>
            </div>
        </div>
    </div>

    <div class="map-section">
        <div class="map-wrap">
            <div id="map"></div>
            <div class="map-legend">
                <div class="legend-item">
                    <div class="legend-dot primary"></div>
                    <span>Primary station (GBHM6)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot secondary"></div>
                    <span>Network stations</span>
                </div>
                <div class="legend-item">
                    <svg width="20" height="2"><line x1="0" y1="1" x2="20" y2="1" stroke="#0c6e8c" stroke-width="1.5" stroke-dasharray="3,3" opacity="0.4"/></svg>
                    <span>Correlation lines</span>
                </div>
                <div class="legend-item">
                    <svg width="14" height="14"><rect x="1" y="1" width="12" height="12" fill="rgba(13,148,136,0.08)" stroke="#0d9488" stroke-width="1" stroke-dasharray="2,2" rx="2"/></svg>
                    <span>Satellite coverage</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <p>That's roughly 30,500 station-days of observations, 237 hypoxia onset events, and 835 total hypoxic days across 9 stations. GBHM6 alone accounts for more than half of all hypoxic days. Hypoxia is extremely localized even within this relatively small network.</p>

        <h2>What the Data Shows</h2>

        <p>The station correlations tell an interesting story. Once fill values were properly filtered, most stations showed strong monthly DO correlations with DPHA1: Cedar Point (r=0.901), Bon Secour (r=0.895), Perdido Pass (r=0.883). The Grand Bay stations correlate well too (GDQM6: r=0.793, GBHM6: r=0.786).</p>

        <p>This matters for modeling because it means the cross-station features carry real signal. A drop in DO at Cedar Point today likely reflects conditions that will show up at Dauphin Island soon. The network isn't just more data; it's spatial context that a single-station model can't capture.</p>

        <h2>Station Data</h2>

        <table>
            <thead>
                <tr>
                    <th>Station</th>
                    <th>Location</th>
                    <th>Hypoxic Days</th>
                    <th>Onsets</th>
                    <th>Mean DO</th>
                </tr>
            </thead>
            <tbody id="station-table"></tbody>
        </table>

        <h2>Model Results</h2>

        <p>At one-day lead, local station data alone (AUC-ROC 0.919) performs essentially the same as the full multi-source model (0.917). When you're predicting 24 hours out, the target station's own dissolved oxygen trend contains most of the signal.</p>

        <p>The picture changes at five and seven-day lead times. At five days, the satellite-enriched model (0.866 AUC-ROC, 0.610 AUC-PR) outperforms NDBC-only (0.847, 0.555). At seven days, the gap persists: 0.853/0.642 vs 0.842/0.590. The satellite features, SST anomalies and eddy kinetic energy from CoastWatch, provide basin-scale context that arrives at the coast days later. That's 36 additional engineered features from 1,438 days of satellite coverage, discovered through AQUAVIEW's CoastWatch collection.</p>

        <p>The no-DO set is revealing. At one day, removing dissolved oxygen drops AUC-ROC from 0.921 to 0.807. At seven days, no-DO (0.850) nearly matches the full model (0.853). Environmental context alone carries almost all the predictive signal at longer horizons.</p>

        <p>For context: these are onset predictions from raw observational data, a harder task than the state classification most published models target. <a href="https://arxiv.org/abs/2602.05178">Rajasekaran et al.</a> report AUC-ROC of 0.98+ for daily state classification using deep learning on ROMS hindcast data. <a href="https://www.nature.com/articles/s41598-025-17053-7">Xue et al.</a> report accuracy of 0.85 and F1 of 0.72 for their blended mechanistic-AI model. Our numbers are lower, but they're answering a different question: not "is DO low right now?" but "will a new event start in 5-7 days?" with no physics model in the loop. The apples-to-apples comparison doesn't quite exist yet in the literature.</p>

        <div class="results-card">
            <h3>Model Performance Across Lead Times</h3>
            <p class="subtitle">AUC-ROC / AUC-PR for four feature sets. Satellite features provide the largest advantage at 5-7 day leads.</p>
            <div class="results-grid" id="results-grid"></div>
        </div>

        <h2>Feature Engineering</h2>

        <div class="features-grid">
            <div class="feature-set cross">
                <div class="feature-title cross">Cross-Source (319)</div>
                <ul class="feature-list">
                    <li>NDBC: 18 lags of DO, salinity, temperature</li>
                    <li>Satellite: 36 CoastWatch features</li>
                    <li>Network: Cross-station DO correlations</li>
                    <li>Temporal: Month, hour-of-day indicators</li>
                </ul>
            </div>
            <div class="feature-set ndbc">
                <div class="feature-title ndbc">NDBC-Only (283)</div>
                <ul class="feature-list">
                    <li>DO lags (1-7 days)</li>
                    <li>Salinity lags</li>
                    <li>Temperature lags</li>
                    <li>Temporal indicators</li>
                </ul>
            </div>
            <div class="feature-set local">
                <div class="feature-title local">Local-Only (173)</div>
                <ul class="feature-list">
                    <li>Same-station DO lags</li>
                    <li>Temperature lags</li>
                    <li>Salinity lags</li>
                    <li>Temporal indicators</li>
                </ul>
            </div>
            <div class="feature-set no-do">
                <div class="feature-title no-do">No-DO (182)</div>
                <ul class="feature-list">
                    <li>All satellite features</li>
                    <li>Cross-station temp/salinity</li>
                    <li>Network correlations</li>
                    <li>Temporal context only</li>
                </ul>
            </div>
        </div>

        <h2>What AQUAVIEW Did and Didn't Do</h2>

        <p>AQUAVIEW helped with discovery across three different data systems. Each item's assets field contains the actual download URLs. The script goes from catalog query to data download without URL reverse-engineering.</p>

        <p>We found stations we didn't know about. The original plan called for 9 stations. AQUAVIEW returned 14 DO-equipped stations, 5 more than expected. KATA1 alone contributed 110 hypoxic days and 43 onset events.</p>

        <p>A practical limitation: WOD annual files are multi-gigabyte global datasets. AQUAVIEW correctly provided their S3 URLs, but these files require byte-range requests rather than direct HTTP access. The CoastWatch ERDDAP datasets required iteration too. AQUAVIEW provided the base URLs and variable metadata, but ERDDAP's griddap subsetting syntax is finicky: each variable needs its own dimension constraints, some datasets have hidden altitude dimensions, and coordinate values must align with the actual grid. Getting the queries right took several rounds. The catalog handled discovery; the subsetting details were ours to figure out.</p>

        <p>What AQUAVIEW didn't do: the science. Knowing that satellite SST anomalies serve as hypoxia precursors, designing lag features, filtering fill values — that's domain knowledge. A catalog can point you to the data. It can't tell you what to do with it.</p>

        <h2>Where This Is Heading</h2>

        <p>This analysis was built with an AI agent (Claude) handling the data discovery and pipeline construction. In that world, a structured STAC API with consistent metadata and asset URLs is what makes agent-driven data access reliable rather than merely possible.</p>

        <p>AQUAVIEW currently spans 24 collections. As that grows, no agent can independently track all those access patterns. The catalog becomes the only practical entry point.</p>

        <h2>Key Takeaways</h2>

        <ol>
            <li>Onset prediction from observational data is feasible at multi-day lead times, with AUC-ROC above 0.85 at seven days out, without requiring physics-model hindcasts.</li>
            <li>Satellite features matter most when lead time matters most. At 5-7 days, satellite-derived SST, chlorophyll, and eddy energy improve AUC-PR by 5+ points over station-only models. That's consistent with basin-scale signals propagating to the coast on multi-day timescales.</li>
            <li>Hypoxia is hyperlocal. GBHM6 accounts for 56% of all hypoxic days across 12 stations. Multi-station discovery matters because you can't assume in advance which stations carry the signal.</li>
            <li>As agents handle more of the workflow, unified catalogs become infrastructure. This entire analysis was built in a single session by an AI agent using AQUAVIEW as the entry point. <a href="https://github.com/AQUAVIEW-DAH/aquaview-hypoxia-demo">Try it yourself</a>, or see the <a href="dashboard.html">live dashboard</a> running these predictions on current NDBC data.</li>
        </ol>

        <footer>
            <p>Data sources: NOAA NDBC Buoys, World Ocean Database, NOAA CoastWatch satellite products. Station data accessed via <a href="https://aquaview.org">AQUAVIEW</a> STAC API. Analysis completed using multi-source integration across OPeNDAP, ERDDAP, and S3 access patterns. <a href="https://github.com/AQUAVIEW-DAH/aquaview-hypoxia-demo">Source code and pipeline on GitHub.</a></p>
            <p style="margin-top: 12px;">AQUAVIEW STAC Catalog. Data from NOAA/NWS National Data Buoy Center, NOAA/NCEI World Ocean Database, and NOAA/NESDIS CoastWatch.</p>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script>
        const stations = {
            "GBHM6": {"name":"Bayou Heron, Grand Bay, MS","lat":30.418,"lon":-88.405,"days":2463,"hyp_days":469,"events":100,"do_mean":4.04,"corr":0.786},
            "KATA1": {"name":"Katrina Cut, AL","lat":30.258,"lon":-88.213,"days":2704,"hyp_days":110,"events":43,"do_mean":5.85,"corr":0.763},
            "BSCA1": {"name":"Bon Secour, AL","lat":30.329,"lon":-87.829,"days":3576,"hyp_days":96,"events":47,"do_mean":6.70,"corr":0.895},
            "CRTA1": {"name":"Cedar Point, AL","lat":30.308,"lon":-88.14,"days":3362,"hyp_days":48,"events":11,"do_mean":7.84,"corr":0.901},
            "MBLA1": {"name":"Middle Bay Lighthouse, AL","lat":30.437,"lon":-88.011,"days":2365,"hyp_days":48,"events":22,"do_mean":7.91,"corr":0.760},
            "MHPA1": {"name":"Meaher Park, AL","lat":30.667,"lon":-87.936,"days":4717,"hyp_days":26,"events":3,"do_mean":7.47,"corr":0.765},
            "GDQM6": {"name":"Bangs Lake, Grand Bay, MS","lat":30.357,"lon":-88.463,"days":1958,"hyp_days":17,"events":4,"do_mean":7.16,"corr":0.793},
            "DPHA1": {"name":"Dauphin Island Sea Lab, AL","lat":30.251,"lon":-88.078,"days":4228,"hyp_days":17,"events":5,"do_mean":7.77,"corr":1.0},
            "WKQA1": {"name":"Fish River, Weeks Bay, AL","lat":30.417,"lon":-87.823,"days":1566,"hyp_days":4,"events":2,"do_mean":7.28,"corr":0.765},
            "PPTA1": {"name":"Perdido Pass, AL","lat":30.279,"lon":-87.556,"days":3006,"hyp_days":0,"events":0,"do_mean":6.80,"corr":0.883},
            "GBCM6": {"name":"Bayou Cumbest, Grand Bay, MS","lat":30.384,"lon":-88.436,"days":480,"hyp_days":0,"events":0,"do_mean":6.06,"corr":null},
            "ADBF1": {"name":"Dry Bar, Apalachicola, FL","lat":29.675,"lon":-85.058,"days":71,"hyp_days":0,"events":0,"do_mean":6.80,"corr":null}
        };

        const results = {
            "1d": {"cross_source": [0.917, 0.398], "ndbc_only": [0.921, 0.419], "local_only": [0.919, 0.424], "no_do": [0.807, 0.196]},
            "3d": {"cross_source": [0.873, 0.441], "ndbc_only": [0.872, 0.460], "local_only": [0.866, 0.450], "no_do": [0.828, 0.368]},
            "5d": {"cross_source": [0.866, 0.610], "ndbc_only": [0.847, 0.555], "local_only": [0.843, 0.541], "no_do": [0.853, 0.581]},
            "7d": {"cross_source": [0.853, 0.642], "ndbc_only": [0.842, 0.590], "local_only": [0.843, 0.608], "no_do": [0.850, 0.671]}
        };

        // Initialize map — using Voyager (light) tiles
        const map = L.map('map', {
            center: [30.1, -87.8],
            zoom: 8,
            scrollWheelZoom: false,
            attributionControl: true
        });

        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; OpenStreetMap, &copy; CARTO',
            subdomains: 'abcd',
            maxZoom: 19
        }).addTo(map);

        // Study area / satellite coverage
        L.rectangle([[28, -91], [31, -85]], {
            color: '#0d9488',
            weight: 1.5,
            opacity: 0.3,
            fillColor: '#0d9488',
            fillOpacity: 0.04,
            dashArray: '6, 4'
        }).addTo(map);

        // Correlation lines to DPHA1
        const dpha1 = stations["DPHA1"];
        Object.entries(stations).forEach(([code, s]) => {
            if (code !== "DPHA1" && s.corr) {
                L.polyline([[s.lat, s.lon], [dpha1.lat, dpha1.lon]], {
                    color: '#0c6e8c',
                    weight: 1,
                    opacity: Math.max(0.1, (s.corr - 0.7) * 1.5),
                    dashArray: '4, 4',
                    interactive: false
                }).addTo(map);
            }
        });

        // Station markers
        Object.entries(stations).forEach(([code, s]) => {
            const isPrimary = code === "GBHM6";

            if (isPrimary) {
                L.circleMarker([s.lat, s.lon], {
                    radius: 16, fillColor: 'transparent', color: '#0d9488',
                    weight: 2, opacity: 0.35, interactive: false
                }).addTo(map);
            }

            const marker = L.circleMarker([s.lat, s.lon], {
                radius: isPrimary ? 10 : 7,
                fillColor: isPrimary ? '#0d9488' : '#0c6e8c',
                color: '#fff',
                weight: isPrimary ? 2.5 : 1.5,
                fillOpacity: 0.9
            });

            marker.bindPopup(`
                <div style="min-width:160px">
                    <div style="font-weight:600;font-size:14px;margin-bottom:4px">${code}</div>
                    <div style="color:#4a5568;margin-bottom:8px">${s.name}</div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:2px 12px;font-size:12px;color:#718096">
                        <span>Hypoxic days</span><span style="text-align:right;color:#1a1a2e;font-weight:500">${s.hyp_days}</span>
                        <span>Onset events</span><span style="text-align:right;color:#1a1a2e;font-weight:500">${s.events}</span>
                        <span>Mean DO</span><span style="text-align:right;color:#1a1a2e;font-weight:500">${s.do_mean} mg/L</span>
                        ${s.corr ? `<span>Correlation</span><span style="text-align:right;color:#1a1a2e;font-weight:500">${s.corr.toFixed(3)}</span>` : ''}
                    </div>
                </div>
            `).addTo(map);

            // Labels
            L.marker([s.lat + 0.025, s.lon], {
                icon: L.divIcon({
                    className: '',
                    html: `<div style="font-family:Inter,sans-serif;font-size:10px;font-weight:600;color:#4a5568;white-space:nowrap;text-align:center">${code}</div>`,
                    iconSize: [60, 14],
                    iconAnchor: [30, 7]
                })
            }).addTo(map);
        });

        // Station table
        const tbody = document.getElementById('station-table');
        Object.entries(stations)
            .sort((a, b) => b[1].hyp_days - a[1].hyp_days)
            .forEach(([code, s]) => {
                const row = document.createElement('tr');
                const label = code === "GBHM6" ? `<span class="primary-station">${code}</span>` : code;
                row.innerHTML = `<td>${label}</td><td>${s.name}</td><td>${s.hyp_days}</td><td>${s.events}</td><td>${s.do_mean.toFixed(2)} mg/L</td>`;
                tbody.appendChild(row);
            });

        // Results grid
        const grid = document.getElementById('results-grid');
        const leads = [['1d','1-Day'],['3d','3-Day'],['5d','5-Day'],['7d','7-Day']];
        const models = [
            {key:'cross_source', label:'Cross-Source', color:'teal'},
            {key:'ndbc_only', label:'NDBC-Only', color:'blue'},
            {key:'local_only', label:'Local-Only', color:'muted'},
            {key:'no_do', label:'No-DO', color:'orange'}
        ];

        leads.forEach(([key, label]) => {
            const group = document.createElement('div');
            group.className = 'metric-group';
            group.innerHTML = `<div class="metric-lead">${label}</div>`;
            models.forEach(m => {
                const [roc, pr] = results[key][m.key];
                group.innerHTML += `<div class="metric-row"><span class="metric-label">${m.label}</span><span class="metric-value ${m.color}">${roc.toFixed(3)} / ${pr.toFixed(3)}</span></div>`;
            });
            grid.appendChild(group);
        });
    </script>
</body>
</html>
